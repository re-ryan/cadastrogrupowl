<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/Layout.xhtml">

	<ui:define name="content">

		<style>
.ui-datatable .ui-datatable-header {
	height: 35px;
}
</style>

		<h1 class="aw-page-title" align="left"
			style="position: relative; color: white; margin-left: 50px; font-size: 1.4em; padding: 15px 0;">GRUPO
			WL</h1>

		<meta http-equiv="EXPIRES" content="0" />
		<meta http-equiv="pragma" content="nocache" />

		<p:spacer height="20px" />

		<f:metadata>
			<f:viewAction action="#{ClienteBean.init}" />
		</f:metadata>

		<h:form id="formMenu">
			<p:menubar>

				<p:menuitem value="Cadastrar" icon="pi pi-user-plus"
					action="/cadastrar.xhtml?faces-redirect=true" ajax="false" />
				<p:menuitem value="Pesquisar" icon="pi pi-search"
					action="/consultar.xhtml?faces-redirect=true" ajax="false" />
				<f:facet name="options">
					<p:commandButton value="Sair" icon="pi pi-fw pi-sign-out"
						styleClass="ui-button-info" action="#{LoginBean.logout}"
						ajax="false" />
				</f:facet>
			</p:menubar>

		</h:form>

		<br />
		<br />


		<h:form id="formDT">
			<p:growl id="growl" />
			<p:dataTable id="clientesDT" widgetVar="DTclientes" var="item"
				value="#{ClienteBean.clientes}" reflow="true"
				selection="#{ClienteBean.cliente}" rowKey="#{item.codCliente}"
				paginator="true" rows="10" paginatorPosition="bottom"
				paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
				rowsPerPageTemplate="10,15,25"
				currentPageReportTemplate="Total de registros: {totalRecords} - Página: {currentPage}/{totalPages}"
				rowIndexVar="j"
				styleClass="ui-datatable-striped ui-datatable-sm ui-datatable-gridlines">

				<f:facet name="header">
					<div>
						<span style="font-weight: bold; font-size: 24;">Clientes
							Cadastrados</span>

						<div class="p-grid" style="float: right">
							<p:commandButton value="Carregar Tabela"
								action="#{ClienteBean.carregaClientes}" ajax="false" />
						</div>
					</div>

				</f:facet>

				<p:column headerText="Código" sortBy="#{item.codCliente}"
					filterBy="#{item.codCliente}" width="100">
					<h:outputText value="#{item.codCliente}" style="text-align:center" />
				</p:column>
				<p:column headerText="Nome" sortBy="#{item.nome}"
					filterBy="#{item.nome}">
					<h:outputText value="#{item.nome}" />
				</p:column>
				<p:column headerText="CPF" sortBy="#{item.cpf}"
					filterBy="#{item.cpf}">
					<h:outputText value="#{item.cpf}" />
				</p:column>
				<p:column headerText="Data Nascimento"
					sortBy="#{item.datNascimento}" filterBy="#{item.datNascimento}" width="150">
					<h:outputText value="#{item.datNascimento}">
						<f:convertDateTime pattern="dd/MM/yyyy" locale="pt" />
					</h:outputText>
				</p:column>
				<p:column headerText="Senha">
					<h:outputText value="#{item.senha}" />
				</p:column>

				<p:column width="30">
					<p:commandButton icon="pi pi-user-edit"
						update=":formAtualiza:clienteDlg"
						oncomplete="PF('dlgCliente').show();" ajax="true">
						<f:setPropertyActionListener value="#{item}"
							target="#{ClienteBean.cliente}" />
					</p:commandButton>
				</p:column>


			</p:dataTable>


		</h:form>

		<h:form id="formAtualiza">

			<p:dialog id="clienteDlg" widgetVar="dlgCliente"
				header="Cliente: #{ClienteBean.cliente.nome}" width="300"
				height="200" modal="true" resizable="false" closable="true"
				closeOnEscape="true">

				<h:panelGrid columns="3" columnClasses="label, value">

					<p:outputLabel value="Nome Completo: " />
					<p:inputText value="#{ClienteBean.cliente.nome}" required="true"
						requiredMessage="Campo nome é obrigatório." autocomplete="off">
						<p:keyFilter regEx="/[^\d]/i" />
					</p:inputText>
					<h:inputHidden></h:inputHidden>

					<p:outputLabel value="CPF: " />
					<p:inputMask value="#{ClienteBean.cliente.cpf}" required="true"
						mask="999.999.999-99" requiredMessage="Campo cpf é obrigatório."
						autocomplete="off">

					</p:inputMask>
					<h:inputHidden></h:inputHidden>

					<p:outputLabel value="Data de Nascimento: " />
					<p:calendar value="#{ClienteBean.cliente.datNascimento}"
						required="true" pattern="dd/MM/yyyy" locale="pt" navigator="true"
						requiredMessage="Campo data de nascimento é obrigatório."
						maxdate="#{ClienteBean.maxDate}" mindate="#{ClienteBean.minDate}"
						yearRange="c-1000:c+1000" autocomplete="off" />
					<h:inputHidden></h:inputHidden>

					<p:commandButton value="Atualizar" icon="pi pi-user-edit"
						action="#{ClienteBean.atualiza}" ajax="false" />
					<p:commandButton value="Deletar" icon="pi pi-user-minus"
						action="#{ClienteBean.deleta}" ajax="false" />

				</h:panelGrid>

			</p:dialog>

		</h:form>


	</ui:define>

</ui:composition>